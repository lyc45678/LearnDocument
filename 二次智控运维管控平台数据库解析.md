tb_1038_area：地区表

tb_1038_realarea：实际所处地区表

tb1040_patrolcenter: 巡维中心表

tb_enumrration：枚举表：其中包括厂站类型（8）站/装置分类（40）

type_define.sql中有相应的分类，现在使用的装置类型为11，不在使用6

![image-20251022105231610](https://cdn.jsdelivr.net/gh/lyc45678/image@master/img/20251022105231674.png)

tb1041_substation：厂站表

tb1046_iedlistview:二次设备表

tb1046_ied:保护装置表

tb1043_equipment：一次装置表

tb_comprehensive_approval ：综合审批表

tb_plate_verification：压板校验表

tb_plate_verification_record：压板校验记录表

tb_drawing:图纸表

tb1102_tagitem：保护装置标签项表 幅值

tb1016_statedata：保护装置状态量表（遥信）

TB1006_analogdata：保护装置模拟量表（遥测）

tb1036_settingdata：保护装置定值表（定值）

tb1111_confirmtagitem：保护装置确认标签项表

tb1101_taggroup：保护装置标签组表

tb_setting_sheet：定值单表

tb_maintenance_dev：维护表

tb_comprehensive_approval_log：全面审批日志表

tb_comprehensive_approval_device：全面审批保护装置表

tb_comprehensive_approval_attach：全面审批附件信息表

tb1107_tagreplace：替换标签库表

tb_faultreport: 错误报告表

案例展示：

1、查询出目前挂检修牌的所有装置，要求展示字段：地区、巡维中心、厂站、一次设备、装置描述、装置类型、当前牌状态、挂牌类型，操作时间、预计摘牌时间、操作人（地区、巡维中心、厂站、一次设备、装置类型等字段需要中文描述）

```sql
select
    realarea.F1038_NAME as '地区',
    patrol.F1040_NAME as '巡维中心',
    sub.F1041_DESC as '厂站',
    equip.F1043_DESC as '一次设备',
    ied.F1046_DESC as '装置描述',
  (select DESCRIPTION
from tb_enumrration enum
where ied.F1046_TYPE = enum.TYPE and SORT = 11) as '装置类型',
     case
        when status.SUSPEND_STATUS = 1 then '挂牌'
        when status.SUSPEND_STATUS = 2 then '摘牌'
        when status.SUSPEND_STATUS = 3 then '超时闭锁'
        when status.SUSPEND_STATUS = 4 then '解锁'
        else concat('未知状态(', status.SUSPEND_STATUS, ')')
        end as '当前牌状态',
    case
        when status.SUSPEND_TYPE = 1 then '远方修改定值'
        when status.SUSPEND_TYPE = 2 then '远方切换定值区'
        when status.SUSPEND_TYPE = 3 then '投退压板'
        when status.SUSPEND_TYPE = 4 then '保护复归'
        when status.SUSPEND_TYPE = 5 then '检修'
        when status.SUSPEND_TYPE = 6 then '未投运'
        else concat('未知类型(', status.SUSPEND_TYPE, ')')
        end as '挂牌类型',
    from_unixtime(status.EXPIRED_TIME) as '操作时间',
    from_unixtime(status.END_DATE) as '',
    ifnull(status.OPERATION_EXECUTOR,'系统自动') as '操作人'
from tb_suspend_status status
inner join tb1046_ied ied on status.SUSPEND_OBJECT = ied.F1046_CODE
inner join tb1041_substation sub on ied.F1041_CODE = sub.F1041_CODE
left join tb1043_equipment equip on ied.F1046_PRIMARYEQUIPMENT = equip.F1043_CODE
left join tb1040_patrolcenter patrol on sub.F1040_CODE = patrol.F1040_CODE
left join tb1038_realarea realarea on sub.F1038_RealArea = realarea.F1038_CODE
where
    status.SUSPEND_TYPE = 5  -- 检修牌
    and status.SUSPEND_STATUS = 1 -- 当前挂牌状态
    and status.SUSPEND_OBJECTTYPE = 3;  -- 二次设备（装置）;
```

枚举表

```sql
CREATE TABLE `tb_enumrration` (
  `SORT` smallint(6) NOT NULL,
  `TYPE` smallint(6) NOT NULL,
  `DESCRIPTION` varchar(256) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

挂牌状态表

```sql
CREATE TABLE `tb_suspend_status` (
  `SUSPEND_OBJECT` char(48) NOT NULL COMMENT '挂牌对象',
  `SUSPEND_TYPE` tinyint(3) unsigned NOT NULL COMMENT '牌类型 1、远方修改定值；2、远方切换定值区；3、投退压板；4、保护复归；5、检修；6、未投运',
  `SUSPEND_OBJECTTYPE` tinyint(3) unsigned NOT NULL COMMENT '挂牌对象类型 1、厂站；2、一次设备；3、二次设备',
  `SUSPEND_STATUS` tinyint(3) unsigned NOT NULL COMMENT '挂牌状态  1、挂牌； 2、摘牌；  3、超时闭锁； 4、解锁',
  `OPERATION_EXECUTOR` varchar(64) DEFAULT NULL COMMENT '操作人，为空则为系统自动操作',
  `EXPIRED_TIME` int(10) unsigned NOT NULL COMMENT '挂牌时间',
  `END_DATE` int(11) NOT NULL COMMENT '预计摘牌时间'
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

地区表

```sql
CREATE TABLE `tb1038_area` (
  `F1038_CODE` char(48) NOT NULL,
  `F1038_OMSID` char(48) DEFAULT NULL,
  `F1038_NAME` char(48) DEFAULT NULL,
  `F1038_DESC` char(96) DEFAULT NULL,
  `F1038_DCID` char(48) DEFAULT NULL,
  PRIMARY KEY (`F1038_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
create table TB1038_AREA
(
	F1038_CODE			char(48)	not null,	-- 地区代码
	F1038_OMSID			char(48)	null,		-- 地区OMSID
	F1038_NAME			char(48)	null,		-- 地区名称
	F1038_DESC			char(96)	null,		-- 地区描述
	F1038_DCID			char(48)	null		-- DCID
);
```

真实地区表

```sql
CREATE TABLE `tb1038_realarea` (
  `F1038_CODE` char(48) NOT NULL,
  `F1038_OMSID` char(48) DEFAULT NULL,
  `F1038_NAME` char(48) DEFAULT NULL,
  `F1038_DESC` char(96) DEFAULT NULL,
  `F1038_DCID` char(48) DEFAULT NULL,
  PRIMARY KEY (`F1038_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8

```

巡维中心表

```sql
CREATE TABLE `tb1040_patrolcenter` (
  `F1040_CODE` char(48) NOT NULL,
  `F1040_NAME` char(48) DEFAULT NULL,
  `F1040_DESC` char(96) DEFAULT NULL,
  `F1038_CODE` char(48) DEFAULT NULL,
  PRIMARY KEY (`F1040_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
create table TB1040_PATROLCENTER
(
	F1040_CODE			char(48)	not null,	-- 巡维中心代码
	F1040_NAME			char(48)	null,		-- 巡维中心名称
	F1040_DESC			char(96)	null,		-- 巡维中心描述
	F1038_CODE			char(48)	null		-- 巡维中心代码
);
```

厂站表

```sql
CREATE TABLE `tb1041_substation` (
  `F1041_CODE` char(48) NOT NULL,
  `F1041_NAME` char(48) DEFAULT NULL,
  `F1041_DESC` char(96) DEFAULT NULL,
  `F1040_CODE` char(48) DEFAULT NULL,
  `F1038_CODE` char(48) DEFAULT NULL,
  `F1041_DQDESC` char(96) DEFAULT NULL,
  `F1041_COMPANY` char(96) DEFAULT NULL,
  `F1041_VOLTAGEH` smallint(6) DEFAULT NULL,
  `F1041_VOLTAGEM` smallint(6) DEFAULT NULL,
  `F1041_VOLTAGEL` smallint(6) DEFAULT NULL,
  `F1041_TYPE` tinyint(4) DEFAULT NULL,
  `F1041_LONGITUDE` float DEFAULT NULL,
  `F1041_LATITUDE` float DEFAULT NULL,
  `F1037_CODE` char(48) DEFAULT NULL,
  `F1041_TAG` char(48) DEFAULT NULL,
  `F1041_CFGLOCK` tinyint(4) DEFAULT NULL COMMENT '变电站配置锁定',
  `F1041_Alias` char(96) DEFAULT NULL,
  `F1038_RealArea` char(96) DEFAULT NULL,
  PRIMARY KEY (`F1041_CODE`),
  KEY `indexF1041_DESC` (`F1041_DESC`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8

create table TB1041_SUBSTATION
(
	F1041_CODE			char(48)	not null,	-- 变电站代码（Substation001~ Substation999）  -RSC-50
	F1041_NAME			char(48)	null,		-- 变电站名称（英文）
	F1041_DESC			char(96)	null,		-- 变电站名称（中文）
	F1040_CODE			char(48)	null,		-- 变电站所属巡维中心代码
	F1038_CODE			char(48)	null,		-- 变电站所属地区代码
	F1041_DQDESC			char(96)	null,		-- 变电站所属地区名称，从SSD导入，允许手工配置  -RSC-50
	F1041_COMPANY           	char(96)	null,		-- 变电站所属单位名称， -RSC-50
	F1041_VOLTAGEH                  smallint   	null,		-- 变电站的电压等级， -RSC-50
	F1041_VOLTAGEM                  smallint   	null,		-- 变电站的电压等级， -RSC-50
	F1041_VOLTAGEL                  smallint   	null,		-- 变电站的电压等级， -RSC-50
	F1041_TYPE			tinyint null,			-- 站类型，0:变电站/1:火电厂/2:水电厂/3:核电站/4:风电场/5:光伏发电站/6:抽水蓄能电站/7:开关站/8:牵引站/9:串补站/10:换流站/11:直流接地站
	F1041_LONGITUDE			float	null,		-- 地理坐标经度
	F1041_LATITUDE			float	null,		-- 地理坐标纬度
	F1037_CODE			char(48)	null,		-- 调管机构
	F1041_TAG			char(96)	null,		-- 变电站标签
	F1041_Alias         char(96)    null,       -- 变电站别名, 用于和定值单中名称匹配
	F1041_CFGLOCK		tinyint	    null,		-- 变电站配置锁定
	F1038_REAlAREA      char(96)    null        -- 变电站所属真实地理地区代码
);
```

一次设备表

```sql
create table TB1043_EQUIPMENT
(
    F1043_CODE       char(48)   not null,  -- 一次设备代码（Equipment0001~ Equipment9999） -RSC-50
    F1041_CODE       char(48)   null,     -- 一次设备所属站代码 -RSC-50
    F1043_VOLTAGE     smallint   null,     -- 间隔的电压等级，10、35、66、110、220、330、500、750、1000等   -RSC-50
    F1042_CODE       char(48)   null,     -- 一次设备所属间隔代码 -RSC-50
    F1043_NAME       char(48)   null,     -- 一次设备名称（英文） -RSC-50
    F1043_DESC       char(96)   null,     -- 一次设备名称（中文） -RSC-50
    F1043_ISVIRTUAL          tinyint zerofill   null,     -- 是否虚拟设备（缺省填0） -RSC-50
    F1043_TYPE       tinyint zerofill   null,     -- 一次设备类型   -RSC-50
    F1043_MANAGER      char(48)   null,     -- 调度单位
    F1043_ID         char(48)   null,     -- 一次设备ID
    F1040_CODE_CONTRALATERAL   char(48)   null,     -- 对侧一次设备所属巡维中心代码 -RSC-50
    F1041_CODE_CONTRALATERAL   char(48)   null      -- 对侧一次设备所属站代码 -RSC-50
);
```

装置表

```sql
CREATE TABLE `tb1046_ied` (
  `F1046_CODE` char(48) NOT NULL,
  `F1041_CODE` char(48) DEFAULT NULL,
  `F1046_VOLTAGE` smallint(6) DEFAULT NULL,
  `F1042_CODE` char(48) DEFAULT NULL,
  `F1050_CODE` char(48) DEFAULT NULL,
  `F1046_NAME` char(48) DEFAULT NULL,
  `F1046_DESC` char(96) DEFAULT NULL,
  `F1046_MANUFACTUROR` char(96) DEFAULT NULL,
  `F1046_MODEL` char(48) DEFAULT NULL,
  `F1046_CONFIGVERSION` char(48) DEFAULT NULL,
  `F1046_AORB` tinyint(3) unsigned zerofill DEFAULT NULL,
  `F1046_ISVIRTUAL` tinyint(3) unsigned zerofill DEFAULT NULL,
  `F1046_TYPE` tinyint(3) unsigned zerofill DEFAULT NULL,
  `F1046_SUBTYPE` tinyint(3) unsigned zerofill DEFAULT NULL,
  `F1046_PRIMARYEQUIPMENT` char(48) DEFAULT NULL,
  `F1046_RUNDATE` datetime DEFAULT NULL,
  `F1046_PRODUCTIONDATE` datetime DEFAULT NULL,
  `F1046_PRODUCTIONNO` char(48) DEFAULT NULL,
  `F1046_SOFTVERSION` char(48) DEFAULT NULL,
  `F1046_ID` char(48) DEFAULT NULL,
  `F1046_SN` char(48) DEFAULT NULL,
  `F1046_IP_A` char(24) DEFAULT NULL,
  `F1046_IP_B` char(24) DEFAULT NULL,
  `F1080_CODE` char(48) DEFAULT NULL,
  `F1046_SORT` tinyint(4) DEFAULT NULL,
  `F1046_TAG` char(48) DEFAULT NULL,
  `F1046_Alias` char(96) DEFAULT NULL,
  `PRE_REGULAR_OVERHAUL_DATE` date DEFAULT NULL COMMENT '上次定检时间',
  `PRE_REGULAR_OVERHAUL_TYPE` tinyint(4) DEFAULT NULL COMMENT '上次定检类型 1：首检 2：全检 3：部检',
  `NEXT_REGULAR_OVERHAUL_DATE` date DEFAULT NULL COMMENT '下次定检时间',
  `NEXT_REGULAR_OVERHAUL_TYPE` tinyint(4) DEFAULT NULL COMMENT '上次定检类型 1：首检 2：全检 3：部检',
  `BUSINESS_DATA_STATUS` tinyint(4) DEFAULT NULL COMMENT '业务数据完备状态 (1 不完备 2 已完备)',
  `MODEL_DATA_STATUS` tinyint(4) DEFAULT NULL COMMENT '模型数据完备状态 (1 不完备 2 已完备)',
  `F1046_RUNNUMBER` char(48) DEFAULT NULL COMMENT '投运编号',
  `F1046_CRC` char(96) DEFAULT NULL,
  `F1046_SGGROUPNUM` tinyint(4) DEFAULT NULL,
  `F1046_BASESGGROUP` tinyint(4) DEFAULT NULL,
  `F1046_CURSGGROUP` tinyint(4) DEFAULT NULL,
  `F1046_RUNFLAG` tinyint(4) DEFAULT NULL,
  `F1046_OVERHAUL` tinyint(4) DEFAULT NULL,
  `F1046_COMMSTATUS` tinyint(4) DEFAULT NULL,
  `F1046_LASTTIME` int(11) DEFAULT NULL,
  `F1046_PREPROCTIME` int(11) DEFAULT NULL,
  `F1046_DATAINTEGRITY` int(11) DEFAULT NULL,
  `F1046_COMMOUTAGETIME` int(11) DEFAULT NULL,
  `F1046_COMMRECOVERYTIME` int(11) DEFAULT NULL,
  PRIMARY KEY (`F1046_CODE`),
  KEY `F1046_TYPE_index` (`F1046_MODEL`) USING HASH
) ENGINE=InnoDB DEFAULT CHARSET=utf8

create table TB1046_IED
(
    F1046_CODE       char(48)   not null,  -- IED的代码（IED0001~IED9999）-RSC-50
    F1041_CODE       char(48)   null,  -- 装置站 -RSC-50
    F1046_VOLTAGE        smallint   null,     -- 间隔的电压等级，10、35、66、110、220、330、500、750、1000等   -RSC-50
    F1042_CODE       char(48)   null,  -- 装置所属间隔 -RSC-50
    F1050_CODE       char(48)   null,     -- IED安装的屏柜代码 -RSC-50
    F1046_NAME       char(48)   null,     -- IED的名称（英文），SCD文件中IED的name属性 -RSC-50
    F1046_DESC       char(96)   null,     -- IED的名称（中文），SCD文件中IED的desc属性 -RSC-50
    F1046_MANUFACTUROR    char(96)   null,     -- IED生产厂家，SCD文件中IED的manufacturer属性 -RSC-50
    F1046_MODEL          char(48)   null,     -- IED型号，SCD文件中IED的type属性 -RSC-50
    F1046_CONFIGVERSION       char(48)   null,     -- IED配置版本，SCD文件中IED的configVersion属性 -RSC-50
    F1046_AORB       tinyint zerofill   null,     -- IED是A或B套 -RSC-50
    F1046_ISVIRTUAL          tinyint zerofill   null,     -- IED是否虚拟设备 -RSC-50
    F1046_TYPE       tinyint zerofill   null,     -- IED类型 -RSC-50
    F1046_SUBTYPE        tinyint zerofill   null,     -- IED子类型，3：非电量保护，2：后备保护，1：主保护，0：不细化
    F1046_PRIMARYEQUIPMENT    char(48)   null,     -- 关联的一次设备代码
    F1046_RUNDATE        datetime   null,     -- 投运日期
    F1046_PRODUCTIONDATE      datetime   null,     -- 出厂日期
    F1046_PRODUCTIONNO    char(48)   null,     -- 出厂编号
    F1046_SOFTVERSION     char(48)   null,     -- 软件版本号
    F1046_ID         char(48)   null,  -- 实物ID -RSC-50
    F1046_SN         char(48)   null,  -- 装置识别码(序列号) -RSC-50
    F1046_IP_A       char(24)   null,     -- A网IP地址 -RSC-50
    F1046_IP_B       char(24)   null,     -- B网IP地址 -RSC-50
    F1080_CODE       char(48)   null,     -- 所属子站 -RSC-50
    F1046_SORT       tinyint    null,     -- 装置分类，1：常规装置，2：智能装置
    F1046_TAG        char(96)   null,     -- 装置标签
    F1046_Alias         char(96)   null,     -- IED的别名, 用于和定值单中名称匹配
    PRE_REGULAR_OVERHAUL_DATE  date   null,     -- 上次定检时间
    PRE_REGULAR_OVERHAUL_TYPE   tinyint    null,     -- 上次定检类型 1：首检 2：部检 3：全检
    NEXT_REGULAR_OVERHAUL_DATE date   null,     -- 下次定检时间
    NEXT_REGULAR_OVERHAUL_TYPE tinyint    null,     -- 下次定检类型 1：首检 2：部检 3：全检
    BUSINESS_DATA_STATUS        tinyint    null,       -- 业务数据完备状态 (0 不完备 1 已完备 2 不完备)
    MODEL_DATA_STATUS           tinyint    null,        -- 模型数据完备状态 (0 不完备 1 规范完备 2 责任完备)
    F1046_RUNNUMBER          char(48)   null,     -- 投运申请编号
    F1046_CRC        char(96)   null,     -- CRC校验码
    F1046_SGGROUPNUM   tinyint zerofill   null,           -- 定值组个数
    F1046_BASESGGROUP     tinyint zerofill   null,           -- 基准定值组号
    F1046_CURSGGROUP   tinyint zerofill   null,           -- 当前定值组号
    F1046_RUNFLAG     tinyint zerofill   null,           -- 投产标志
    F1046_OVERHAUL    tinyint zerofill   null,           -- 检修标志
    F1046_COMMSTATUS   tinyint zerofill   null,           -- 通信状态
    F1046_LASTTIME    int                null,           -- 最后一次通信时间
    F1046_PREPROCTIME  int          null,     -- 上次处理时间
    F1046_DATAINTEGRITY    int unsigned   null,        -- 数据完整性
    F1046_COMMOUTAGETIME      int                null,           -- 通信中断时间
    F1046_COMMRECOVERYTIME    int                null            -- 通信恢复时间
);
```

二次装置表

```sql
CREATE TABLE `tb1046_iedlistview` (
  `F1046_CODE` char(48) NOT NULL,
  `F1041_CODE` char(48) DEFAULT NULL,
  `F1041_DESC` char(96) DEFAULT NULL,
  `F1042_CODE` char(48) DEFAULT NULL,
  `F1042_DESC` char(96) DEFAULT NULL,
  `F1042_VOLTAGE` smallint(6) DEFAULT NULL,
  `F1042_VOLTAGEDESC` char(8) DEFAULT NULL,
  `F1050_CODE` char(48) DEFAULT NULL,
  `F1050_DESC` char(96) DEFAULT NULL,
  `F1046_NAME` char(48) DEFAULT NULL,
  `F1046_DESC` char(96) DEFAULT NULL,
  `F1046_MANUFACTUROR` char(48) DEFAULT NULL,
  `F1046_MODEL` char(48) DEFAULT NULL,
  `F1046_CONFIGVERSION` char(48) DEFAULT NULL,
  `F1046_CRCBASE` char(48) DEFAULT NULL,
  `F1046_AORB` char(8) DEFAULT NULL,
  `F1046_RUNSTATUSCODE` char(48) DEFAULT NULL,
  `F1046_COMMSTATUSCODE` char(48) DEFAULT NULL,
  `F1046_GOOSESTATUSCODE` char(48) DEFAULT NULL,
  `F1046_SVSTATUSCODE` char(48) DEFAULT NULL,
  `F1046_SGSTATUSCODE` char(48) DEFAULT NULL,
  `F1046_CRCSTATUSCODE` char(48) DEFAULT NULL,
  `F1046_CRCVALCODE` char(48) DEFAULT NULL,
  `F1046_VERVALCODE` char(48) DEFAULT NULL,
  `F1046_ID` char(48) DEFAULT NULL,
  `F1046_OMSID` char(48) DEFAULT NULL,
  `F1046_DCID` char(48) DEFAULT NULL,
  `F1046_SN` char(48) DEFAULT NULL,
  `F1046_PROTECTIONCATEGORY` tinyint(4) DEFAULT NULL,
  `F1046_COUNTRY` char(24) DEFAULT NULL,
  `F1046_TYPE` tinyint(4) DEFAULT NULL,
  `F1046_PRODUCTIONNO` char(48) DEFAULT NULL,
  `F1046_PRODUCTIONDATE` char(12) DEFAULT NULL,
  `F1049_CODE` char(48) DEFAULT NULL,
  `F1049_DESC` char(96) DEFAULT NULL,
  `F1046_SOFTVERSION` char(48) DEFAULT NULL,
  `F1046_VERSTATUSCODE` char(48) DEFAULT NULL,
  PRIMARY KEY (`F1046_CODE`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

2、查询所有区号为：1，且已绑定装置（装置code不为空）的定值单，要求展示字段：定值单编号，定值区号，定值单状态，厂站描述，装置描述（厂站描述，装置描述需要从tb1041、tb1046表查询）

```SQL
select sheet_name as '定值单编号', group_no as '定值区号',
       case
            when  sheet_status = 0 then '历史定值单'
            when sheet_status = 1 then '运行定值单'
            else '未知状态'
            end as '定值单状态',
        sub.F1041_DESC as '厂站描述',
        ied.F1046_DESC as '装置描述'
from tb_setting_sheet ts
inner join tb1046_ied ied on ts.device_code = ied.F1046_CODE
inner join tb1041_substation sub on ied.F1041_CODE = sub.F1041_CODE
where ts.group_no ='1' and ts.device_code is not null and ts.device_code != '';
```

定值单表

```sql
create table tb_setting_sheet
(
    id varchar(32) not null,
    sheet_name      varchar(255) not null comment '定值单编号',
    substation      varchar(255) not null comment '厂站名称',
    device_name     varchar(255) not null comment '设备名称',
    device_type     varchar(255) null comment '设备型号',
    switch_name     varchar(255) null comment '开关编号',
    group_no        varchar(32) null comment '定值区号',
    pt_ratio        varchar(255) null comment 'PT变比',
    ct_ratio        varchar(255) null comment 'CT变比',
    sheet_status    tinyint null default 0 comment '定值单状态, 0: 历史定值单, 1: 运行定值单',
    device_code     varchar(48) null comment '装置code',
    settings        json null comment '定值单定值',
    file_name       varchar(255) null comment '文件名',
    raw_content    longblob null comment '原始文件内容',
    confirm         tinyint null default 0 comment '定值单确认状态, 0: 待确认定值单, 1: 已确认定值单 2：已丢弃定值单'
);
alter table tb_setting_sheet add constraint tb_setting_sheetindex1 primary key(id);
alter table tb_setting_sheet add column source varchar(64) null comment '定值单来源';
alter table tb_setting_sheet add column receive_time timestamp default current_timestamp comment '定值单接收时间';
CREATE INDEX idx_setting_sheet_name on tb_setting_sheet(sheet_name);
CREATE INDEX idx_setting_device_code on tb_setting_sheet(device_code);
CREATE INDEX idx_setting_sheet_substation on tb_setting_sheet(substation);
```

```sql
CREATE TABLE `tb_setting_sheet` (
  `id` varchar(32) NOT NULL,
  `sheet_name` varchar(255) NOT NULL COMMENT '定值单编号',
  `substation` varchar(255) NOT NULL COMMENT '厂站名称',
  `device_name` varchar(255) NOT NULL COMMENT '设备名称',
  `device_type` varchar(255) DEFAULT NULL COMMENT '设备型号',
  `switch_name` varchar(255) DEFAULT NULL COMMENT '开关编号',
  `group_no` varchar(32) DEFAULT NULL,
  `pt_ratio` varchar(255) DEFAULT NULL COMMENT 'PT变比',
  `ct_ratio` varchar(255) DEFAULT NULL COMMENT 'CT变比',
  `sheet_status` tinyint(4) DEFAULT '0' COMMENT '定值单状态, 0: 历史定值单, 1: 运行定值单',
  `device_code` varchar(48) DEFAULT NULL COMMENT '装置code',
  `settings` json DEFAULT NULL,
  `source` varchar(64) DEFAULT NULL COMMENT '定值单来源',
  `file_name` varchar(255) DEFAULT NULL COMMENT '文件名',
  `raw_content` longblob COMMENT '原始文件内容',
  `confirm` tinyint(4) DEFAULT '0' COMMENT '定值单确认状态, 0: 未确认定值单, 1: 已确认定值单',
  `receive_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '定值单接收时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

```sql
CREATE TABLE `tb_counter_device` (
  `id` varchar(48) NOT NULL COMMENT '设备ID',
  `projectID` varchar(48) DEFAULT NULL COMMENT ' 项目ID',
  `operator` varchar(32) DEFAULT NULL COMMENT '运维单位',
  `substationName` varchar(32) DEFAULT NULL COMMENT '变电站名称',
  `substationVoltage` varchar(32) DEFAULT NULL COMMENT '变电站电压等级',
  `substationType` varchar(64) DEFAULT NULL COMMENT '变电站类型',
  `bay` varchar(128) DEFAULT NULL COMMENT '一次设备',
  `deviceName` varchar(128) DEFAULT NULL COMMENT '设备名称',
  `deviceType` varchar(128) DEFAULT NULL COMMENT '设备类型',
  `deviceModel` varchar(128) DEFAULT NULL COMMENT '设备型号',
  `manufacturer` varchar(128) DEFAULT NULL COMMENT '设备厂家',
  `deviceVoltage` varchar(64) DEFAULT NULL COMMENT '设备电压等级',
  `problemLevel` varchar(32) DEFAULT NULL COMMENT '问题等级',
  `deadline` varchar(32) DEFAULT NULL COMMENT '截止整改时间到月',
  `targetID` varchar(48) DEFAULT NULL COMMENT '关联设备ID',
  `matchCol` int(11) DEFAULT NULL COMMENT '匹配列',
  `finished` tinyint(1) DEFAULT NULL COMMENT '是否执行完成',
  `property` json DEFAULT NULL COMMENT '动态列',
  `status` tinyint(4) DEFAULT '0' COMMENT '状态: 0-编制中 1-执行中 2-审核中 3-审核通过 4-审核不通过',
  `reportTime` varchar(32) DEFAULT NULL COMMENT '上报时间',
  `auditTime` varchar(32) DEFAULT NULL COMMENT '审核时间',
  `auditAdvice` varchar(2048) DEFAULT NULL COMMENT '审批意见',
  `measures` varchar(2048) DEFAULT NULL,
  `projectStartTime` varchar(32) DEFAULT NULL,
  `projectEndTime` varchar(32) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='装置表'
```
